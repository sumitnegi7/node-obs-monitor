
## 🔍 Monitoring and Observability Setup

This application is equipped with a comprehensive monitoring and observability stack, utilizing OpenTelemetry for tracing, Prometheus for metrics collection, Grafana for visualization, and Loki for log aggregation.

### 🛠️ Key Components

#### 1. **📡 OpenTelemetry Tracing**

- **⚙️ Auto-Instrumentation**: The application automatically instruments key Node.js modules, capturing trace and metric data without manual intervention. This includes HTTP requests, database queries, and other operations.
- **🚀 OTLP Exporters**:
  - **📈 Trace Exporter**: Traces are exported using the OTLP (OpenTelemetry Protocol) to a specified tracing backend, such as Jaeger.
  - **📊 Metric Exporter**: Performance metrics are periodically exported to an OTLP-compatible metrics backend, such as Prometheus.
- **⏲️ Periodic Exporting Metric Reader**: Ensures regular collection and export of metrics, providing up-to-date data for monitoring.

#### 2. **📊 Prometheus**

- **📉 Metrics Collection**: Prometheus is configured to scrape metrics from the Node.js Express application. Metrics include HTTP request durations, error rates, and custom application metrics.
- **🖥️ Prometheus UI**: Access the Prometheus dashboard at [http://localhost:9090](http://localhost:9090) to query and analyze metrics data.

#### 3. **📊 Grafana**

- **📈 Data Visualization**: Grafana is used to visualize metrics and trace data from Prometheus and Jaeger. Custom dashboards can be created to monitor various aspects of the application's performance.
- **🔑 Grafana UI**: Access Grafana at [http://localhost:3000](http://localhost:3000). The default credentials are `admin/admin`.
- **🔗 Integration**: Grafana integrates with both Prometheus and Loki, allowing you to visualize metrics alongside logs and traces in a single pane of glass.

#### 4. **🗃️ Loki**

- **📜 Log Aggregation**: Loki aggregates logs from the application, making it easy to correlate logs with traces and metrics. This helps in diagnosing issues by providing context around when and why something went wrong.
- **📂 Loki UI**: Access Loki's logs at [http://localhost:3100](http://localhost:3100). Logs can be queried directly or visualized in Grafana.

#### 5. **🔍 Jaeger**

- **🌐 Distributed Tracing**: Jaeger is used to visualize distributed traces collected by OpenTelemetry. This helps in understanding request flows across services and identifying performance bottlenecks.
- **🖥️ Jaeger UI**: Access Jaeger at [http://localhost:16686](http://localhost:16686) to explore trace data.

### 🛠️ How It Works

1. **🚀 Startup**: The application starts with the OpenTelemetry SDK initializing trace and metric collection, and services like Prometheus, Grafana, Loki, and Jaeger are brought online via Docker Compose.
2. **📉 Metrics Collection**: Prometheus scrapes metrics from the application, such as request latency, error counts, and custom metrics.
3. **📜 Logging**: Logs generated by the application are sent to Loki, where they can be queried and visualized in Grafana.
4. **🔍 Tracing**: Distributed traces are captured by OpenTelemetry and exported to Jaeger for visualization.
5. **📊 Monitoring and Visualization**: Grafana is used to create custom dashboards that visualize metrics from Prometheus and logs from Loki, providing a comprehensive view of the application's performance and health.

### 📋 Setup Instructions

1. **📥 Clone the Repository**: Download the codebase to your local environment.
2. **📦 Install Dependencies**: Run `npm install` to install Node.js dependencies.
3. **🚀 Start the Services**: Use `docker-compose up` to start Prometheus, Grafana, Loki, and Jaeger services.
4. **🏃 Run the Application**: Start the Node.js application with `node index.js`.
5. **🖥️ Access the Monitoring Tools**: 
   - Prometheus: [http://localhost:9090](http://localhost:9090)
   - Grafana: [http://localhost:3000](http://localhost:3000)
   - Loki: [http://localhost:3100](http://localhost:3100)
   - Jaeger: [http://localhost:16686](http://localhost:16686)

### ⚙️ Additional Configuration

- **📝 Prometheus Scrape Config**: The Prometheus configuration file (`prometheus-config.yml`) should be customized to include additional scrape targets or adjust scrape intervals as needed.
- **📊 Grafana Dashboards**: You can create or import custom Grafana dashboards to visualize specific metrics and logs relevant to your application.
- **🌐 Environment Variables**: The OpenTelemetry setup can be further customized using environment variables to specify custom endpoints, headers, or other configuration parameters.

This setup provides a powerful observability framework, allowing you to monitor, trace, and debug your application effectively.
